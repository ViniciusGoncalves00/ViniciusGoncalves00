---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from "../../components/header.astro";
import Footer from "../../components/footer.astro";

export async function getStaticPaths() {
  return [
    { params: { locale: 'pt-br' } },
    { params: { locale: 'en-us' } },
  ];
}
---
<BaseLayout pageName="Portfolio">
    <Header slot="header" />
    <canvas slot="main" id="canvas" class="w-full h-full"></canvas>
    <Footer slot="footer" />
</BaseLayout>

<script>
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

const canvas = document.getElementById("canvas")!;
const width = canvas.clientWidth, height = canvas.clientHeight;

const camera = new THREE.PerspectiveCamera( 45, width / height, 0.01, 10 );
camera.position.set(2, 2, 2);
camera.lookAt(0, 0, 0);

const scene = new THREE.Scene();

const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshPhongMaterial();

const mesh = new THREE.Mesh( geometry, material );
scene.add( mesh );

const light = new THREE.SpotLight();
light.position.set(-1, 1, 1);

scene.add(light);

const renderer = new THREE.WebGLRenderer( { antialias: true, alpha: true, canvas: canvas } );
renderer.setSize( width, height );
renderer.setAnimationLoop( animate );

const controls = new OrbitControls( camera, canvas );
controls.update();

function animate(time: any ) {
	renderer.render( scene, camera );
}

window.addEventListener("resize", () => {
  const w = canvas.clientWidth;
  const h = canvas.clientHeight;
  camera.aspect = w / h;
  camera.updateProjectionMatrix();
  renderer.setSize(w, h);
});

</script>