---
import HorizontalContainer from './horizontalContainer.astro';
---

<HorizontalContainer>
    <header class="opacity-50 hover:transition-opacity hover:opacity-100 duration-200 w-full flex items-center justify-between">
        <nav aria-label="site navigation" class="w-1/4 flex items-center justify-center">
            <ul class="flex">
                <li class="px-4 my-4 flex items-center justify-center cursor-pointer hover:font-medium"><a href="/">Home</a></li>
                <li class="px-4 my-4 flex items-center justify-center cursor-pointer hover:font-medium"><a href="/blog">Blog</a></li>
                <li class="px-4 my-4 flex items-center justify-center cursor-pointer hover:font-medium"><a href="/contact">Contact</a></li>
                <li class="px-4 my-4 flex items-center justify-center cursor-pointer hover:font-medium"><a href="/404">404</a></li>
                <li class="px-4 my-4 flex items-center justify-center cursor-pointer hover:font-medium">design</li>
            </ul>
        </nav>

        <div class="w-2/4 flex items-center justify-center">
            <a href="/" rel="author" class="text-2xl font-normal"><strong>portfolio</strong> vinicius gon√ßalves</a>
        </div>
      
        <nav aria-label="social networks" class="w-1/4 flex items-center justify-center">
            <ul class="flex">
                <button id="light" class="px-4 flex items-center justify-center cursor-pointer hover:font-medium">Turn on the lights</button>
                <button id="dark" class="px-4 flex items-center justify-center cursor-pointer hover:font-medium">Turn off the lights</button>
                <button id="language" class="px-4 flex items-center justify-center cursor-pointer hover:font-medium">language</button>
            </ul>
        </nav>
    </header>
</HorizontalContainer>

<script>
    const root = document.documentElement;  
    const darkButton = document.getElementById("dark");
    const lightButton = document.getElementById("light");

    document.documentElement.classList.toggle(
        "dark",
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches),
    );

    if (localStorage.theme === "dark") {
        lightButton?.classList.toggle("hidden");
    } else if (localStorage.theme === "light") {
        darkButton?.classList.toggle("hidden");
    }

    darkButton?.addEventListener("click", () => {
        root.dataset.theme = "dark";
        root.setAttribute("data-theme", "dark");

        darkButton?.classList.toggle("hidden");
        lightButton?.classList.toggle("hidden");

        localStorage.setItem("theme", "dark");
    }); 

    lightButton?.addEventListener("click", () => {
        root.dataset.theme = "light";
        root.setAttribute("data-theme", "light");

        darkButton?.classList.toggle("hidden");
        lightButton?.classList.toggle("hidden");

        localStorage.setItem("theme", "light");
    });
</script>